<!doctype html>
<html  class="x-admin-sm">
<head>
    <meta charset="UTF-8">
    <title>后台登录-信息抓取系统</title>
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8" />
    <!-- viewport 属性在 Chrome 不支持 target-densitydpi=low-dpi  -->
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="stylesheet" href="__XADMIN__/css/font.css">
    <link rel="stylesheet" href="__XADMIN__/css/login.css">
    <link rel="stylesheet" href="__XADMIN__/css/xadmin.css">
</head>
<body class="login-bg">

    <div class="login layui-anim layui-anim-up">
        <div class="message">信息抓取系统-管理登录</div>
        <div id="darkbannerwrap"></div>

        <form method="post" class="layui-form" >
            <input name="username" placeholder="用户名"  type="text" lay-verify="required|username" class="layui-input" >
            <hr class="hr15">
            <input name="password" lay-verify="password" placeholder="密码"  type="password" class="layui-input">
            <hr class="hr15">
            <input value="登录" lay-submit lay-filter="login" style="width:100%;" type="submit">
            <hr class="hr20" >
        </form>
    </div>

    <!-- 底部开始 -->
    <script type="text/javascript" src="__STATIC__/cdn/jquery.min.js"></script>
    <script src="__XADMIN__/lib/layui/layui.js" charset="utf-8"></script>
    <script>
        $(function  () {
            layui.use('form', function(){
                var form = layui.form;
                //监听提交
                form.on('submit(login)', function(data){
                    // 向后端接口发送数据
                    $.post("{:url('action')}",data.field,function(res){
                        if(res.code > 0){
                            // 操作失败
                            layer.msg(res.msg,{icon: 2});
                        }else{
                            layer.msg(res.msg, {
                                icon: 1,
                                time: 2000
                            }, function(){
                                // 登录成功后跳转到后台首页
                                window.location.href = "{:url('admin/index/index')}"
                            });
                        }
                    },"json");
                    return false;
                });

                // 以下是数据验证
                form.verify({
                    username: function(value, item){
                        if(!new RegExp("^[a-zA-Z0-9_\u4e00-\u9fa5\\s·]+$").test(value)){
                            return '用户名不能有特殊字符';
                        }
                        if(/(^\_)|(\__)|(\_+$)/.test(value)){
                            return '用户名首尾不能出现下划线\'_\'';
                        }
                        if(/^\d+\d+\d$/.test(value)){
                            return '用户名不能全为数字';
                        }
                    }
                    ,password: [
                        /^[\S]{6,12}$/
                        ,'密码必须6到12位，且不能出现空格'
                    ]
                });
            });
        })
    </script>
    <!-- 底部结束 -->
</body>
</html>